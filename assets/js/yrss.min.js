/* YRSS 1.0.3 */
/* Copyright (c) 2016 Mark Hillard - MIT License */

!function(t){t.fn.rssfeed=function(r,a,i){var n={ssl:!1,limit:10,showerror:!0,errormsg:"",tags:!1,date:!0,dateformat:"default",titletag:"h4",content:!0,snippet:!0,snippetimage:!1,snippetlimit:120,linktarget:"_self"};return a=t.extend(n,a),this.each(function(n,s){var o="";if(a.ssl&&(o="s"),t(s).hasClass("rssFeed")||t(s).addClass("rssFeed"),null===r)return!1;var l="http"+o+"://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent('select * from feed where url="'+r+'"');null!==a.limit&&(l+=" limit "+a.limit),l+="&format=json",t.getJSON(l,function(r,n,o){if("success"===n)e(s,r,a),t.isFunction(i)&&i.call(this,t(s));else if("error"===n||"parsererror"===n){if(!a.showerror)return!1;var l;l=""!==a.errormsg?a.errormsg:o,t(s).html('<div class="rssError"><p>'+l+"</p></div>")}})})};var e=function(e,r,a){var i=r.query.results.item;if(t.isArray(i)||(i=[i]),!i)return!1;var n,s="";t.each(i,function(t){var e,r=i[t];void 0!==r.category&&(e=r.category.toString().toLowerCase().replace(/ /g,"-").replace(/,/g," "));var n;if(r.pubDate){var o=new Date(r.pubDate);if("default"===a.dateformat)n=(o.getMonth()+1).toString()+"/"+o.getDate().toString()+"/"+o.getFullYear();else if("spellmonth"===a.dateformat){var l=["January","February","March","April","May","June","July","August","September","October","November","December"];n=l[o.getMonth()]+" "+o.getDate().toString()+", "+o.getFullYear()}else"localedate"===a.dateformat?n=o.toLocaleDateString():"localedatetime"===a.dateformat&&(n=o.toLocaleDateString()+" "+o.toLocaleTimeString())}if(s+='<div class="entryWrapper"',a.tags&&void 0!==r.category&&(s+='data-tag="'+e+'"'),s+='><div class="entryTitle"><'+a.titletag+'><a href="'+r.link+'">'+r.title+"</a></"+a.titletag+"></div>",a.date&&n&&(s+='<div class="entryDate">'+n+"</div>"),a.content){var c=r.description;s+='<div class="entryContent">'+c+"</div>"}s+="</div>"}),n=t(s),a.content&&t.each(n,function(){if(a.snippet){if(a.snippetimage){var e=t(this).find("img").first();0!==e.length&&(t(this).prepend('<div class="entryImage">'),t(this).find(".entryImage").append(e))}var r=t(this).find(".entryContent"),i=t(r).text().length;r.text(function(t,e){return i<=a.snippetlimit?e:e.substring(0,a.snippetlimit)+" ..."})}}),t(e).append(n),t("a",e).attr("target",a.linktarget)}}(jQuery);
